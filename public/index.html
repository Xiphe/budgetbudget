<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="script-src 'self' 'unsafe-inline';"
    />
    <title>Monthly Budgets</title>
    <link href="/fonts/index.css" rel="stylesheet" />
    <script>
      const {
        remote: { nativeTheme, systemPreferences },
        ipcRenderer,
      } = window.require('electron');
      function setColors() {
        const accentColor = systemPreferences.getAccentColor();
        const highlightColor = `rgb(${(
          systemPreferences.getUserDefault('AppleHighlightColor', 'string') ||
          '9 92 220'
        )
          .split(' ')
          .slice(0, 3)
          .map((i) => Math.round(Number(i) * 255))
          .join(', ')})`;

        document.querySelector(
          'html',
        ).style.cssText = `--highlight-color: ${highlightColor}; --accent-color: #${accentColor};`;
      }

      function setScheme() {
        const {
          shouldUseDarkColors,
          shouldUseHighContrastColors,
        } = nativeTheme;
        document.querySelector('html').dataset.theme = [
          shouldUseDarkColors ? 'dark' : 'light',
          shouldUseHighContrastColors && 'high-contrast',
        ]
          .filter(Boolean)
          .join('-');
      }
      setScheme();
      setColors();
      ipcRenderer.on('UPDATE_COLOR_PREFERENCES', setColors);
      ipcRenderer.on('UPDATE_SCHEME', setScheme);
    </script>
    <style>
      html {
        font-size: 0.85em;
      }
      body {
        margin: 0;
        padding: 0;
        font-family: 'Roboto';
      }
      * {
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
